<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¼˜åŒ–åçš„å›¾åƒè¾“å…¥èŠ‚ç‚¹æ˜¾ç¤ºæ•ˆæœ</title>
    <link rel="stylesheet" href="../static/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .demo-container {
            max-width: 1200px;
            margin: 50px auto;
            padding: 20px;
        }
        .demo-title {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 30px;
            color: var(--text-primary);
            text-align: center;
        }
        .optimization-summary {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: var(--shadow);
        }
        .summary-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-primary);
        }
        .summary-list {
            list-style: none;
            padding: 0;
        }
        .summary-list li {
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .summary-list li:last-child {
            border-bottom: none;
        }
        .summary-list i {
            color: var(--success-color);
            font-size: 18px;
        }
        .demo-section {
            margin-bottom: 40px;
        }
        .section-title {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-primary);
        }
        .connection-info {
            background: var(--bg-color);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 30px;
        }
        .connection-diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .node-box {
            background: var(--card-bg);
            border: 2px solid var(--primary-color);
            border-radius: var(--border-radius);
            padding: 15px;
            text-align: center;
            min-width: 120px;
        }
        .node-box.main {
            border-color: var(--success-color);
            background: rgba(16, 185, 129, 0.1);
        }
        .node-box.reference {
            border-color: var(--secondary-color);
            background: rgba(100, 116, 139, 0.1);
        }
        .node-id {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 5px;
        }
        .node-type {
            font-size: 12px;
            color: var(--text-secondary);
        }
        .arrow {
            font-size: 24px;
            color: var(--primary-color);
        }
        .stitch-node {
            background: var(--primary-color);
            color: white;
            border-radius: var(--border-radius);
            padding: 15px;
            text-align: center;
            min-width: 120px;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1 class="demo-title">ğŸ¯ å›¾åƒè¾“å…¥èŠ‚ç‚¹ä¼˜åŒ–æ•ˆæœå±•ç¤º</h1>
        
        <div class="optimization-summary">
            <h2 class="summary-title">âœ… ä¼˜åŒ–æˆæœ</h2>
            <ul class="summary-list">
                <li><i class="fas fa-check-circle"></i> <strong>æ™ºèƒ½å¿…é€‰æ€§åˆ¤æ–­ï¼š</strong>åŸºäºImageStitchèŠ‚ç‚¹è¿æ¥å…³ç³»ï¼Œæ­£ç¡®è¯†åˆ«ä¸»å›¾åƒè¾“å…¥å’Œå‚è€ƒå›¾åƒè¾“å…¥</li>
                <li><i class="fas fa-check-circle"></i> <strong>èŠ‚ç‚¹IDæ˜¾ç¤ºï¼š</strong>å¤šä¸ªå›¾åƒè¾“å…¥èŠ‚ç‚¹æ—¶è‡ªåŠ¨æ˜¾ç¤ºèŠ‚ç‚¹IDï¼Œä¾¿äºç”¨æˆ·åŒºåˆ†</li>
                <li><i class="fas fa-check-circle"></i> <strong>æ¸…æ™°çš„å‘½åï¼š</strong>ä¸»å›¾åƒè¾“å…¥ vs å‚è€ƒå›¾åƒè¾“å…¥ï¼Œè¯­ä¹‰æ›´æ˜ç¡®</li>
                <li><i class="fas fa-check-circle"></i> <strong>ç”¨æˆ·å‹å¥½ï¼š</strong>å¿…é€‰èŠ‚ç‚¹æ ‡è®°ä¸ºå¿…éœ€ï¼Œå¯é€‰èŠ‚ç‚¹æ ‡è®°ä¸ºå¯é€‰</li>
            </ul>
        </div>
        
        <div class="demo-section">
            <h2 class="section-title">ğŸ”— å·¥ä½œæµè¿æ¥å…³ç³»åˆ†æ</h2>
            <div class="connection-info">
                <h3>Kontextå·¥ä½œæµ (nunchaku-flux.1-kontext-dev.json)</h3>
                <p>é€šè¿‡åˆ†æImageStitchèŠ‚ç‚¹çš„è¿æ¥å…³ç³»ï¼Œæ­£ç¡®è¯†åˆ«äº†å›¾åƒè¾“å…¥èŠ‚ç‚¹çš„è§’è‰²ï¼š</p>
                
                <div class="connection-diagram">
                    <div class="node-box main">
                        <div class="node-id">èŠ‚ç‚¹142</div>
                        <div class="node-type">LoadImageOutput</div>
                        <div class="node-type">ä¸»å›¾åƒè¾“å…¥</div>
                    </div>
                    <div class="arrow">â†’</div>
                    <div class="stitch-node">
                        <div>ImageStitch</div>
                        <div>èŠ‚ç‚¹146</div>
                        <div style="font-size: 12px;">image1è¾“å…¥</div>
                    </div>
                </div>
                
                <div class="connection-diagram">
                    <div class="node-box reference">
                        <div class="node-id">èŠ‚ç‚¹147</div>
                        <div class="node-type">LoadImageOutput</div>
                        <div class="node-type">å‚è€ƒå›¾åƒè¾“å…¥</div>
                    </div>
                    <div class="arrow">â†’</div>
                    <div class="stitch-node">
                        <div>ImageStitch</div>
                        <div>èŠ‚ç‚¹146</div>
                        <div style="font-size: 12px;">image2è¾“å…¥</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="demo-section">
            <h2 class="section-title">ğŸ¨ ä¼˜åŒ–åçš„Webç•Œé¢æ•ˆæœ</h2>
            <div id="optimizedImageInputs">
                <!-- ä¼˜åŒ–åçš„å›¾åƒè¾“å…¥èŠ‚ç‚¹å°†åœ¨è¿™é‡Œç”Ÿæˆ -->
            </div>
        </div>
        
        <div class="demo-section">
            <h2 class="section-title">ğŸ“Š æŠ€æœ¯å®ç°ç»†èŠ‚</h2>
            <div class="connection-info">
                <h3>æ™ºèƒ½åˆ¤æ–­é€»è¾‘</h3>
                <ol>
                    <li><strong>æŸ¥æ‰¾ImageStitchèŠ‚ç‚¹ï¼š</strong>åœ¨å·¥ä½œæµä¸­å®šä½ImageStitchèŠ‚ç‚¹</li>
                    <li><strong>åˆ†æè¿æ¥å…³ç³»ï¼š</strong>æ£€æŸ¥LoadImageOutputèŠ‚ç‚¹è¿æ¥åˆ°ImageStitchçš„å“ªä¸ªè¾“å…¥</li>
                    <li><strong>ç¡®å®šè§’è‰²ï¼š</strong>è¿æ¥åˆ°image1çš„ä¸ºä¸»å›¾åƒè¾“å…¥ï¼ˆå¿…éœ€ï¼‰ï¼Œè¿æ¥åˆ°image2çš„ä¸ºå‚è€ƒå›¾åƒè¾“å…¥ï¼ˆå¯é€‰ï¼‰</li>
                    <li><strong>å¤‡é€‰åˆ¤æ–­ï¼š</strong>å¦‚æœæ— æ³•ç¡®å®šè¿æ¥å…³ç³»ï¼Œä½¿ç”¨orderå­—æ®µä½œä¸ºå¤‡é€‰åˆ¤æ–­ä¾æ®</li>
                </ol>
                
                <h3>èŠ‚ç‚¹IDæ˜¾ç¤ºé€»è¾‘</h3>
                <ul>
                    <li><strong>æ¡ä»¶æ˜¾ç¤ºï¼š</strong>åªæœ‰å½“å­˜åœ¨å¤šä¸ªå›¾åƒè¾“å…¥èŠ‚ç‚¹æ—¶æ‰æ˜¾ç¤ºèŠ‚ç‚¹ID</li>
                    <li><strong>æ ·å¼è®¾è®¡ï¼š</strong>ä½¿ç”¨è¾ƒå°çš„å­—ä½“å’Œç‰¹æ®Šæ ·å¼ï¼Œä¸å¹²æ‰°ä¸»è¦ä¿¡æ¯</li>
                    <li><strong>å“åº”å¼ï¼š</strong>åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹éƒ½èƒ½è‰¯å¥½æ˜¾ç¤º</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿä¼˜åŒ–åçš„å›¾åƒè¾“å…¥æ•°æ®
        const optimizedImageInputs = [
            {
                node_id: "142",
                name: "ä¸»å›¾åƒè¾“å…¥",
                type: "image",
                required: true,
                description: "é€‰æ‹©ä¸»è¦å¤„ç†çš„å›¾åƒ (å¿…éœ€)"
            },
            {
                node_id: "147",
                name: "å‚è€ƒå›¾åƒè¾“å…¥",
                type: "image",
                required: false,
                description: "é€‰æ‹©å‚è€ƒå›¾åƒ (å¯é€‰)"
            }
        ];

        // ç”Ÿæˆä¼˜åŒ–åçš„å›¾åƒè¾“å…¥èŠ‚ç‚¹
        function generateOptimizedImageInputs(imageInputs, containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            // æ£€æŸ¥æ˜¯å¦æœ‰å¤šä¸ªå›¾åƒè¾“å…¥èŠ‚ç‚¹
            const showNodeIds = imageInputs.length > 1;
            
            container.innerHTML = imageInputs.map(input => `
                <div class="image-input-group">
                    <div class="input-header">
                        <h4>${input.name}</h4>
                        ${showNodeIds ? `<span class="node-id-badge">èŠ‚ç‚¹ID: ${input.node_id}</span>` : ''}
                        <span class="input-type">${input.type}</span>
                        ${input.required ? '<span class="required-badge">å¿…éœ€</span>' : '<span class="optional-badge">å¯é€‰</span>'}
                    </div>
                    <p class="input-description">${input.description}</p>
                    <div class="image-selector">
                        <button type="button" class="btn btn-secondary">
                            <i class="fas fa-image"></i>
                            é€‰æ‹©å›¾åƒ
                        </button>
                        <div class="selected-image" id="selected-${input.node_id}" style="display: none;">
                            <img src="" alt="å·²é€‰æ‹©çš„å›¾åƒ" id="preview-${input.node_id}">
                            <button type="button" class="btn btn-sm btn-secondary">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // é¡µé¢åŠ è½½æ—¶ç”Ÿæˆæ¼”ç¤ºå†…å®¹
        document.addEventListener('DOMContentLoaded', function() {
            generateOptimizedImageInputs(optimizedImageInputs, 'optimizedImageInputs');
        });
    </script>
</body>
</html> 